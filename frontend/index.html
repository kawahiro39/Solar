<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>太陽光パネル配置シミュレーション</title>
    
    <!-- Google Maps API -->
    <script async defer 
        src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=drawing,geometry&callback=initMap">
    </script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- ヘッダー -->
        <div class="header">
            <h1>太陽光パネル配置シミュレーション</h1>
            <p class="subtitle">屋根の形状を描画してパネル配置をシミュレート</p>
        </div>

        <!-- コントロールパネル -->
        <div class="control-panel">
            <div class="control-section">
                <h3>パネル設定</h3>
                <div class="control-group">
                    <label for="panel-width">パネル幅 (cm):</label>
                    <input type="number" id="panel-width" value="165" min="50" max="300">
                </div>
                <div class="control-group">
                    <label for="panel-height">パネル高さ (cm):</label>
                    <input type="number" id="panel-height" value="100" min="50" max="200">
                </div>
                <div class="control-group">
                    <label for="offset">オフセット/離隔 (cm):</label>
                    <input type="number" id="offset" value="10" min="0" max="50">
                </div>
            </div>

            <div class="control-section">
                <h3>操作</h3>
                <button id="draw-mode-btn" class="btn btn-primary">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M3,17.25V21h3.75L17.81,9.94l-3.75-3.75L3,17.25z M20.71,7.04c0.39-0.39,0.39-1.02,0-1.41l-2.34-2.34c-0.39-0.39-1.02-0.39-1.41,0l-1.83,1.83 3.75,3.75 1.83-1.83z"/>
                    </svg>
                    屋根を描画
                </button>
                <button id="clear-polygon-btn" class="btn btn-secondary">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M19,6.41L17.59,5 12,10.59 6.41,5 5,6.41 10.59,12 5,17.59 6.41,19 12,13.41 17.59,19 19,17.59 13.41,12z"/>
                    </svg>
                    描画をクリア
                </button>
                <button id="calculate-btn" class="btn btn-success" disabled>
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M19,3H5c-1.1,0-2,0.9-2,2v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M9,17H7v-7h2V17z M13,17h-2V7h2V17z M17,17h-2v-4h2V17z"/>
                    </svg>
                    パネル配置
                </button>
                <button id="generate-pdf-btn" class="btn btn-info" disabled>
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                    </svg>
                    資料作成
                </button>
            </div>

            <div class="control-section">
                <h3>描画ヒント</h3>
                <ul class="hints">
                    <li>マップをクリックして屋根の角を順番に指定</li>
                    <li>最低3点以上で多角形を作成</li>
                    <li>右クリックまたはダブルクリックで描画完了</li>
                    <li>描画完了後、頂点をドラッグして調整可能</li>
                </ul>
            </div>
        </div>

        <!-- Google Maps -->
        <div id="map-container">
            <div id="map"></div>
            <div id="map-overlay" class="hidden">
                <div class="overlay-content">
                    <div class="spinner"></div>
                    <p>処理中...</p>
                </div>
            </div>
        </div>

        <!-- 結果表示エリア -->
        <div id="results" class="results hidden">
            <h2>シミュレーション結果</h2>
            
            <div class="result-cards">
                <div class="result-card">
                    <h3>パネル配置</h3>
                    <div class="result-content">
                        <div class="stat-item">
                            <span class="stat-label">パネル枚数:</span>
                            <span class="stat-value" id="panel-count">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">総面積:</span>
                            <span class="stat-value" id="total-area">-</span>
                        </div>
                    </div>
                </div>

                <div class="result-card">
                    <h3>発電量予測</h3>
                    <div class="result-content">
                        <div class="stat-item">
                            <span class="stat-label">年間発電量:</span>
                            <span class="stat-value" id="yearly-generation">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">システム容量:</span>
                            <span class="stat-value" id="system-capacity">-</span>
                        </div>
                    </div>
                </div>

                <div class="result-card full-width">
                    <h3>月別発電量予測</h3>
                    <canvas id="monthly-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- ステータスメッセージ -->
        <div id="status-message" class="status-message hidden">
            <span id="status-text"></span>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>